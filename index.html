<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Audio panner demo</title>
    <meta name="description" content="Demo page for usage of PannerNode and AudioListener from javascript Web Audio API">
    <link rel="stylesheet" href="index.css">
    <script src="node_modules/whatwg-fetch/fetch.js"></script>
    <script src="index.js" defer></script>
</head>
<body>
    <form class="controls" name="controls">
        <h1 class="controls-title">Audio panner demo</h1>

        <div class="controls-sound">
            <input type="checkbox" name="mute" id="mute" class="controls-sound-input">
            <label class="controls-sound-label" for="mute">
                <span class="controls-sound-text">Mute sound</span>
            </label>
        </div>

        <script src="form-builder.js"></script>
        <script type="text/javascript">
            FormBuilder.render(FormBuilder.fieldset({
                name: 'PannerNode',
                id: 'panner',
                rows: [
                    { name: 'positionX', star: 1 },
                    { name: 'positionY', star: 1 },
                    { name: 'positionZ', star: 1, attributes: 'readonly' },
                    { name: 'orientationX', attributes: 'readonly' },
                    { name: 'orientationY', attributes: 'readonly' },
                    { name: 'orientationZ', attributes: 'readonly' },
                    { name: 'orientationAngle', star: 2, attributes: 'min="-360" max="360" step="10"' },
                    { name: 'coneInnerAngle', attributes: 'min="0" max="360" step="10"' },
                    { name: 'coneOuterAngle', attributes: 'min="0" max="360" step="10"' },
                    { name: 'coneOuterGain', attributes: 'min="0" max="1" step="0.1"' },
                    { name: 'panningModel', type: 'select', options: ['HRTF', 'equalpower'] },
                    { name: 'distanceModel', type: 'select', options: ['linear', 'inverse', 'exponential'] },
                    { name: 'refDistance', attributes: 'min="0"' },
                    { name: 'maxDistance', attributes: 'min="0"' },
                    { name: 'rolloffFactor', attributes: 'min="0" step="0.1"' }
                ]
            }));
            FormBuilder.render(FormBuilder.fieldset({
                name: 'AudioListener',
                id: 'listener',
                rows: [
                    { name: 'positionX', star: 1, attributes: 'readonly' },
                    { name: 'positionY', star: 1, attributes: 'readonly' },
                    { name: 'positionZ', star: 1, attributes: 'readonly' },
                    { name: 'forwardX', attributes: 'readonly' },
                    { name: 'forwardY', attributes: 'readonly' },
                    { name: 'forwardZ', attributes: 'readonly' },
                    { name: 'upX', attributes: 'readonly' },
                    { name: 'upY', attributes: 'readonly' },
                    { name: 'upZ', attributes: 'readonly' },
                    { name: 'forwardAngle', star: 2, attributes: 'readonly' }
                ]
            }));
            FormBuilder.render(FormBuilder.fieldset({
                name: 'Volume gains',
                id: 'volume',
                rows: [
                    { name: 'distanceGain', attributes: 'readonly' },
                    { name: 'coneGain', attributes: 'readonly' },
                    { name: 'totalVolumeGain', attributes: 'readonly' }
                ]
            }));
        </script>
        <p class="controls-text">
            * Axis X points to the right; axis Y points to the top; axis Z points towards us
        </p>
        <p class="controls-text">
            ** These attributes are not of the related objects but added for convenience
        </p>
    </form>

    <div class="field">
        <div class="object object_panner hidden">
            <div class="object-instance">→</div>
            <div class="object-cone object-cone_right"></div>
            <div class="object-cone object-cone_left"></div>
            <div class="object-ref-distance"></div>
            <div class="object-max-distance"></div>
        </div>
        <div class="object object_listener hidden">
            <div class="object-instance">→</div>
        </div>
    </div>

    <div class="click-to-play-message">
        Tap on the red circle or this message to start playing sound
    </div>
</body>
</html>
